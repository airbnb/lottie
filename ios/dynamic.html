
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Dynamic Properties Â· Lottie</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-prism/prism.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-collapsible-chapters/collapsible-chapters.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="addsubviews.html" />
    
    
    <link rel="prev" href="view-controllers.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../android/android.html">
            
                <a href="../android/android.html">
            
                    
                    Android
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../android/android.html">
            
                <a href="../android/android.html#getting-started">
            
                    
                    Getting Started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../android/android.html">
            
                <a href="../android/android.html#sample-app">
            
                    
                    Sample App
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../android/caching.html">
            
                <a href="../android/caching.html">
            
                    
                    Caching and Preloading
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../android/dynamic.html">
            
                <a href="../android/dynamic.html">
            
                    
                    Dynamic Properties (WIP)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../android/images.html">
            
                <a href="../android/images.html">
            
                    
                    Images
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="../android/performance.html">
            
                <a href="../android/performance.html">
            
                    
                    Performance
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7" data-path="../android/avd.html">
            
                <a href="../android/avd.html">
            
                    
                    Lottie vs AVD
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.8" data-path="../android/apk-size.html">
            
                <a href="../android/apk-size.html">
            
                    
                    APK size
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.9" data-path="../android/troubleshooting.html">
            
                <a href="../android/troubleshooting.html">
            
                    
                    Troubleshooting
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.10" data-path="../android/contributing.html">
            
                <a href="../android/contributing.html">
            
                    
                    Contributing
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../ios.html">
            
                <a href="../ios.html">
            
                    
                    iOS/MacOS
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" >
            
                <span>
            
                    
                    Docs
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1" data-path="../ios.html">
            
                <a href="../ios.html#getting-started-on-ios-or-macos">
            
                    
                    Getting Started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2" data-path="../ios.html">
            
                <a href="../ios.html#installing-lottie">
            
                    
                    Installing Lottie
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3" data-path="../ios.html">
            
                <a href="../ios.html#ios-sample-app">
            
                    
                    iOS Sample App
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.4" data-path="../ios.html">
            
                <a href="../ios.html#macos-sample-app">
            
                    
                    MacOS Sample App
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.5" data-path="../ios.html">
            
                <a href="../ios.html#objective-c-examples">
            
                    
                    Objective C Examples
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.6" data-path="../ios.html">
            
                <a href="../ios.html#swift-examples">
            
                    
                    Swift Examples
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.7" data-path="view-controllers.html">
            
                <a href="view-controllers.html">
            
                    
                    View Controller Transitions
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.3.1.8" data-path="dynamic.html">
            
                <a href="dynamic.html">
            
                    
                    Dynamic Properties
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.9" data-path="addsubviews.html">
            
                <a href="addsubviews.html">
            
                    
                    Adding Views to Animation at Runtime
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2" >
            
                <span>
            
                    
                    Tutorials
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.1" data-path="dynamic_properties.html">
            
                <a href="dynamic_properties.html">
            
                    
                    Building a Dynamic Progress Loader
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.3" >
            
                <span>
            
                    
                    Troubleshooting
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.3.1" data-path="performance.html">
            
                <a href="performance.html">
            
                    
                    Performance
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2" data-path="troubleshooting.html">
            
                <a href="troubleshooting.html">
            
                    
                    Troubleshooting
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../react-native/react-native.html">
            
                <a href="../react-native/react-native.html">
            
                    
                    React Native
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../react-native/react-native.html">
            
                <a href="../react-native/react-native.html#getting-started">
            
                    
                    Getting Started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../react-native/sample-app.html">
            
                <a href="../react-native/sample-app.html">
            
                    
                    Sample App
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../react-native/props.html">
            
                <a href="../react-native/props.html">
            
                    
                    Props
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../web/troubleshooting.html">
            
                <a href="../web/troubleshooting.html">
            
                    
                    Troubleshooting
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../web/web.html">
            
                <a href="../web/web.html">
            
                    
                    Web
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../web/getting-started.html">
            
                <a href="../web/getting-started.html">
            
                    
                    Getting started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" >
            
                <a target="_blank" href="https://www.youtube.com/watch?v=5XMUJdjI0L8">
            
                    
                    Video tutorial
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../web/previewing.html">
            
                <a href="../web/previewing.html">
            
                    
                    Previewing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../web/expressions.html">
            
                <a href="../web/expressions.html">
            
                    
                    Expressions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="../after-effects/troubleshooting.html">
            
                <a href="../after-effects/troubleshooting.html">
            
                    
                    Troubleshooting
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../after-effects/getting-started.html">
            
                <a href="../after-effects/getting-started.html">
            
                    
                    After Effects
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../after-effects/getting-started.html">
            
                <a href="../after-effects/getting-started.html">
            
                    
                    Getting started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../after-effects/bodymovin-installation.html">
            
                <a href="../after-effects/bodymovin-installation.html">
            
                    
                    Install Bodymovin Plugin
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.2.1" data-path="../after-effects/bodymovin-settings.html">
            
                <a href="../after-effects/bodymovin-settings.html">
            
                    
                    Bodymovin settings
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../after-effects/general-tips.html">
            
                <a href="../after-effects/general-tips.html">
            
                    
                    General tips & guidelines
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../after-effects/artwork-to-lottie-walkthrough.html">
            
                <a href="../after-effects/artwork-to-lottie-walkthrough.html">
            
                    
                    Sketch/SVG/Illustrator to Lottie walkthrough
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="../after-effects/illustrator-to-lottie-walkthrough.html">
            
                <a href="../after-effects/illustrator-to-lottie-walkthrough.html">
            
                    
                    Advanced Illustrtor to Lottie walkthrough
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="../after-effects/troubleshooting.html">
            
                <a href="../after-effects/troubleshooting.html">
            
                    
                    Troubleshooting
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../supported-features.html">
            
                <a href="../supported-features.html">
            
                    
                    Supported After Effects Features
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../other-platforms.html">
            
                <a href="../other-platforms.html">
            
                    
                    Other Platforms
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" >
            
                <span>
            
                    
                    Mobile
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1.1" >
            
                <a target="_blank" href="https: //github.com/martijn00/LottieXamarin">
            
                    
                    Xamarin
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.1.2" >
            
                <a target="_blank" href="https://github.com/bradmartin/nativescript-lottie">
            
                    
                    NativeScript
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.1.3" >
            
                <a target="_blank" href="https://github.com/m1ga/ti.animation">
            
                    
                    Titanium
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.1.4" >
            
                <a target="_blank" href="https://github.com/azchohfi/LottieUWP">
            
                    
                    Windows (UWP)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8.2" >
            
                <span>
            
                    
                    Web Frameworks
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.2.1" >
            
                <a target="_blank" href="https://github.com/chenqingspring/react-lottie">
            
                    
                    React
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.2" >
            
                <a target="_blank" href="https://github.com/chenqingspring/vue-lottie">
            
                    
                    Vue
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.3" >
            
                <a target="_blank" href="https://github.com/chenqingspring/ng-lottie">
            
                    
                    Angular
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../troubleshooting.html">
            
                <a href="../troubleshooting.html">
            
                    
                    Troubleshooting
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../community-showcase.html">
            
                <a href="../community-showcase.html">
            
                    
                    Community Showcase
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Dynamic Properties</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
                                <section class="normal markdown-section">
                                
                                <h1 id="changing-animations-at-runtime"><a name="changing-animations-at-runtime" class="plugin-anchor" href="#changing-animations-at-runtime"><i class="fa fa-link" aria-hidden="true"></i></a>Changing Animations At Runtime</h1>
<p>Lottie can do more than just play beautiful animations. Lottie allows you to <strong>change</strong> animations at runtime. Changing animations is done through Lottie&apos;s dynamic properties API. The dynamic properties API features a class for searching through animation data, <code class="language-">LOTKeypath</code>, a protocol for setting animation data <code class="language-">LOTValueDelegate</code>, several helper objects for common animation scenarios <code class="language-">LOTValueCallback</code>, <code class="language-">LOTBlockCallback</code>, <code class="language-">LOTInterpolatorCallback</code>, and finally a method for setting animation delegates on <code class="language-">LOTAnimationView</code> <code class="language-">setValueDelegate:forKeypath:</code>.</p>
<h2 id="lotkeypath"><a name="lotkeypath" class="plugin-anchor" href="#lotkeypath"><i class="fa fa-link" aria-hidden="true"></i></a>LOTKeypath</h2>
<p>To understand how to change animation properties in Lottie, you should first understand how animation properties are stored in Lottie.
Animation properties are stored in a data tree that mimics the information heirarchy of After Effects. In After Effects a <code class="language-">Composition</code> is a collection of <code class="language-">Layers</code> that each have their own timelines. <code class="language-">Layer</code> objects have string names, and their contents can be an image, shape layers, fills, strokes, or just about anything that is drawable. Each object in After Effects has a name. Lottie can find these objects and properties by their name using a <code class="language-">LOTKeypath</code>. A <code class="language-">LOTKeypath</code> is an object initialized with a list of <code class="language-">String</code> names. <code class="language-">LOTKeypath</code>  is used to search the backing animation data for properties and objects. Keypath string names should match the names used for layers and objects in the animation data. </p>
<p>Wildcards (*) and Globstars (**) can be used to search through keypaths. Wildcards will search through a single depth layer, globstars will search any depth.</p>
<h3 id="creating-a-lotkeypath"><a name="creating-a-lotkeypath" class="plugin-anchor" href="#creating-a-lotkeypath"><i class="fa fa-link" aria-hidden="true"></i></a>Creating a LOTKeypath</h3>
<p><code class="language-">LOTKeypath</code> is initialized with either a list of strings (Objective-C only), or a single dot-seperated string.
As an example, lets say we have an animation with a layer named <code class="language-">Boat</code> and we want to target its <code class="language-">Position</code> property.</p>
<p><img src="../images/Boat_Loader_Props.png" alt="Boat_Props"></p>
<p>We can search for it explicitly by creating a keypath that targets <code class="language-">Boat.Transform.Position</code></p>
<h4 id="swift"><a name="swift" class="plugin-anchor" href="#swift"><i class="fa fa-link" aria-hidden="true"></i></a>Swift</h4>
<pre class="language-"><code class="lang-swift language-"><span class="token keyword">let</span> keypath <span class="token operator">=</span> <span class="token function">LOTKeypath</span><span class="token punctuation">(</span>string<span class="token punctuation">:</span> <span class="token string">&quot;Boat.Transform.Position&quot;</span><span class="token punctuation">)</span>
</code></pre>
<h4 id="objective-c"><a name="objective-c" class="plugin-anchor" href="#objective-c"><i class="fa fa-link" aria-hidden="true"></i></a>Objective-C</h4>
<pre class="language-"><code class="lang-objective-c language-">LOTKeypath *keypath = [LOTKeypath keypathWithKeys:@&quot;Boat&quot;, @&quot;Transform&quot;, @&quot;Position&quot;, nil];
//  ----OR-----
LOTKeypath *keypath = [LOTKeypath keypathWithString@&quot;Boat.Transform.Position&quot;];
</code></pre>
<h3 id="using-wildcards"><a name="using-wildcards" class="plugin-anchor" href="#using-wildcards"><i class="fa fa-link" aria-hidden="true"></i></a>Using Wildcards</h3>
<p>Suppose you are interested in changing the color of any shape group named <code class="language-">Fish</code> in the Animation. You can do this with Globstars, or double wild cards.</p>
<h4 id="swift"><a name="swift" class="plugin-anchor" href="#swift"><i class="fa fa-link" aria-hidden="true"></i></a>Swift</h4>
<pre class="language-"><code class="lang-swift language-"><span class="token keyword">let</span> keypath <span class="token operator">=</span> <span class="token function">LOTKeypath</span><span class="token punctuation">(</span>string<span class="token punctuation">:</span> <span class="token string">&quot;**.Fish.Fill.Color&quot;</span><span class="token punctuation">)</span>
</code></pre>
<h4 id="objective-c"><a name="objective-c" class="plugin-anchor" href="#objective-c"><i class="fa fa-link" aria-hidden="true"></i></a>Objective-C</h4>
<pre class="language-"><code class="lang-objective-c language-">LOTKeypath *keypath = [LOTKeypath keypathWithKeys:@&quot;**&quot;, @&quot;Fish&quot;, @&quot;Fill&quot;, @&quot;Color&quot;, nil];
//  ----OR-----
LOTKeypath *keypath = [LOTKeypath keypathWithString@&quot;*.Fish.Fill.Color&quot;];
</code></pre>
<h2 id="lotvaluedelegate"><a name="lotvaluedelegate" class="plugin-anchor" href="#lotvaluedelegate"><i class="fa fa-link" aria-hidden="true"></i></a>LOTValueDelegate</h2>
<p><code class="language-">LOTValueDelegate</code> is a collection of 5 protocols used to provide new animation data for a given <code class="language-">LOTKeypath</code> search. 
A value delegate is called every frame while an animation plays and requests the override data for the given property. The delegate is given the current frame of the animation, and the animation property&apos;s current data. If animation already existed for the property the delegate is given the leading and trailing keyframe as well as the current interpolated progress. Each of the 5 protocols returns a different type of animated data. </p>
<p>The protocols are <code class="language-">LOTColorValueDelegate</code>, <code class="language-">LOTNumberValueDelegate</code>, <code class="language-">LOTPointValueDelegate</code>, <code class="language-">LOTSizeValueDelegate</code>, <code class="language-">LOTPathValueDelegate</code>.</p>
<h2 id="predefined-lotvaluedelegate-objects"><a name="predefined-lotvaluedelegate-objects" class="plugin-anchor" href="#predefined-lotvaluedelegate-objects"><i class="fa fa-link" aria-hidden="true"></i></a>Predefined LOTValueDelegate Objects</h2>
<p>Lottie contains several predefined objects that conform to <code class="language-">LOTValueDelegate</code> that support a number of basic operations. There are three types of objects, <code class="language-">LOTValueCallback</code>, <code class="language-">LOTBlockCallback</code>, and <code class="language-">LOTInterpolatorCallback</code>. Each type contains an object for a specific data type. Example <code class="language-">LOTValueCallback</code> contains <code class="language-">LOTNumberValueCallback</code>, <code class="language-">LOTColorValueCallback</code>, etc. </p>
<h3 id="lotvaluecallback"><a name="lotvaluecallback" class="plugin-anchor" href="#lotvaluecallback"><i class="fa fa-link" aria-hidden="true"></i></a>LOTValueCallback</h3>
<p><code class="language-">LOTValueCallbacks</code> are used to simply set a value. Each object has a property for its data type that can be set. While the animaiton is playing, Lottie will set the keypath to the value specified by the value callback. There are 5 different value callback objects: <code class="language-">LOTColorValueCallback</code>, <code class="language-">LOTNumberValueCallback</code>, <code class="language-">LOTPointValueCallback</code>, <code class="language-">LOTSizeValueCallback</code>, <code class="language-">LOTPathValueCallback</code>.</p>
<p>Example:</p>
<h4 id="swift"><a name="swift" class="plugin-anchor" href="#swift"><i class="fa fa-link" aria-hidden="true"></i></a>Swift</h4>
<pre class="language-"><code class="lang-swift language-"><span class="token keyword">let</span> colorCallback <span class="token operator">=</span> <span class="token function">LOTColorValueCallback</span><span class="token punctuation">(</span>color<span class="token punctuation">:</span><span class="token builtin">UIColor</span><span class="token punctuation">.</span>blueColor<span class="token punctuation">.</span><span class="token builtin">CGColor</span><span class="token punctuation">)</span>
</code></pre>
<h4 id="objective-c"><a name="objective-c" class="plugin-anchor" href="#objective-c"><i class="fa fa-link" aria-hidden="true"></i></a>Objective-C</h4>
<pre class="language-"><code class="lang-objective-c language-">LOTColorValueCallback *colorCallback = [LOTColorValueCallback withCGColor:[UIColor blueColor].CGColor];
</code></pre>
<h3 id="lotblockcallback"><a name="lotblockcallback" class="plugin-anchor" href="#lotblockcallback"><i class="fa fa-link" aria-hidden="true"></i></a>LOTBlockCallback</h3>
<p><code class="language-">LOTBlockCallback</code> is similar to valueCallback, but instead holds a block or closure that is called every frame for the property. There are 5 different block callback objects: <code class="language-">LOTColorBlockCallback</code>, <code class="language-">LOTNumberBlockCallback</code>, <code class="language-">LOTPointBlockCallback</code>, <code class="language-">LOTSizeBlockCallback</code>, <code class="language-">LOTPathBlockCallback</code>. </p>
<p>Example:</p>
<h4 id="swift"><a name="swift" class="plugin-anchor" href="#swift"><i class="fa fa-link" aria-hidden="true"></i></a>Swift</h4>
<pre class="language-"><code class="lang-swift language-"><span class="token keyword">let</span> colorBlock <span class="token operator">=</span> <span class="token builtin">LOTColorBlockCallback</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>currentFrame<span class="token punctuation">,</span> startKeyFrame<span class="token punctuation">,</span> endKeyFrame<span class="token punctuation">,</span> interpolatedProgress<span class="token punctuation">,</span> startColor<span class="token punctuation">,</span> endColor<span class="token punctuation">,</span> interpolatedColor<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">Unmanaged</span><span class="token operator">&lt;</span><span class="token builtin">CGColor</span><span class="token operator">&gt;</span> <span class="token keyword">in</span>
    <span class="token keyword">return</span> aColor
<span class="token punctuation">}</span>
</code></pre>
<h4 id="objective-c"><a name="objective-c" class="plugin-anchor" href="#objective-c"><i class="fa fa-link" aria-hidden="true"></i></a>Objective-C</h4>
<pre class="language-"><code class="lang-objective-c language-">LOTColorBlockCallback *colorBlock = [LOTColorBlockCallback withBlock:^CGColorRef _Nonnull(CGFloat currentFrame, CGFloat startFrame, CGFloat endFrame, CGFloat interpolatedProgress, CGColorRef  _Nullable startColor, CGColorRef  _Nullable endColor, CGColorRef  _Nullable interpolatedColor) {
    return aColor;
}];
</code></pre>
<h3 id="lotinterpolatorcallback"><a name="lotinterpolatorcallback" class="plugin-anchor" href="#lotinterpolatorcallback"><i class="fa fa-link" aria-hidden="true"></i></a>LOTInterpolatorCallback</h3>
<p><code class="language-">LOTInterpolatorCallback</code> is used to interpolate between two values using a progress from 0 to 1. Each Interpolator contains a startValue, endvalue, and a currentProgress. When currentProgress is changed externally, the property is set with the interpolated value. There are 5 different interpolator callback objects: <code class="language-">LOTColorInterpolatorCallback</code>, <code class="language-">LOTNumberInterpolatorCallback</code>, <code class="language-">LOTPointInterpolatorCallback</code>, <code class="language-">LOTSizeInterpolatorCallback</code>, <code class="language-">LOTPathInterpolatorCallback</code>. </p>
<p>Example:</p>
<h4 id="swift"><a name="swift" class="plugin-anchor" href="#swift"><i class="fa fa-link" aria-hidden="true"></i></a>Swift</h4>
<pre class="language-"><code class="lang-swift language-"><span class="token keyword">let</span> positionInterpolator <span class="token operator">=</span> <span class="token function">LOTPointInterpolatorCallback</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> startPoint<span class="token punctuation">,</span> to<span class="token punctuation">:</span> endPoint<span class="token punctuation">)</span>
positionInterpolator<span class="token punctuation">.</span>currentProgress <span class="token operator">=</span> <span class="token number">0.5</span>
<span class="token comment" spellcheck="true">// Sets the position to the halfway point between start and end point.</span>
</code></pre>
<h4 id="objective-c"><a name="objective-c" class="plugin-anchor" href="#objective-c"><i class="fa fa-link" aria-hidden="true"></i></a>Objective-C</h4>
<pre class="language-"><code class="lang-objective-c language-">LOTPointInterpolatorCallback *positionInterpolator = [LOTPointInterpolatorCallback withFromPoint:startPoint toPoint:endPoint];
positionInterpolator.currentProgress = 0.5;
// Sets the position to the halfway point between start and end point.
</code></pre>
<h2 id="setting-a-value-delegate"><a name="setting-a-value-delegate" class="plugin-anchor" href="#setting-a-value-delegate"><i class="fa fa-link" aria-hidden="true"></i></a>Setting a Value Delegate</h2>
<p>After creating a <code class="language-">LOTKeypath</code> and a <code class="language-">LOTValueDelegate</code> it is possible to set the delegate on an existing <code class="language-">LOTAnimationView</code>.</p>
<p><code class="language-">setValueDelegate:forKeypath:</code> will search through the exisiting animation view, and set the <code class="language-">valueDelegate</code> on each property that matches the <code class="language-">keypath</code>. The animation will be forced to redraw. An exception will be thrown if the data type of the property does not match the data type of the delegate (Example: setting number delegate on color property). </p>
<p><strong>NOTE</strong> <code class="language-">LOTAnimationView</code> maintains a WEAK reference to the delegate. This helps reduce retain cycles. You must maintain a reference to the delegate to keep it in memory.</p>
<h2 id="example"><a name="example" class="plugin-anchor" href="#example"><i class="fa fa-link" aria-hidden="true"></i></a>Example</h2>
<p>Say we want to create 4 toggle switches.
<img src="../images/switch_Normal.gif" alt="Toggle">
<br>
Its easy to create the four switches and play them:</p>
<pre class="language-"><code class="lang-swift language-"><span class="token keyword">let</span> animationView <span class="token operator">=</span> <span class="token function">LOTAnimationView</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string">&quot;toggle&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">self</span><span class="token punctuation">.</span>view<span class="token punctuation">.</span><span class="token function">addSubview</span><span class="token punctuation">(</span>animationView<span class="token punctuation">)</span>
animationView<span class="token punctuation">.</span>frame<span class="token punctuation">.</span>origin<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">40</span>
animationView<span class="token punctuation">.</span>frame<span class="token punctuation">.</span>origin<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">20</span>
animationView<span class="token punctuation">.</span>autoReverseAnimation <span class="token operator">=</span> <span class="token boolean">true</span>
animationView<span class="token punctuation">.</span>loopAnimation <span class="token operator">=</span> <span class="token boolean">true</span>
animationView<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> animationView2 <span class="token operator">=</span> <span class="token function">LOTAnimationView</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string">&quot;toggle&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">self</span><span class="token punctuation">.</span>view<span class="token punctuation">.</span><span class="token function">addSubview</span><span class="token punctuation">(</span>animationView2<span class="token punctuation">)</span>
animationView2<span class="token punctuation">.</span>frame<span class="token punctuation">.</span>origin<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">40</span>
animationView2<span class="token punctuation">.</span>frame<span class="token punctuation">.</span>origin<span class="token punctuation">.</span>y <span class="token operator">=</span> animationView<span class="token punctuation">.</span>frame<span class="token punctuation">.</span>maxY <span class="token operator">+</span> <span class="token number">4</span>
animationView2<span class="token punctuation">.</span>autoReverseAnimation <span class="token operator">=</span> <span class="token boolean">true</span>
animationView2<span class="token punctuation">.</span>loopAnimation <span class="token operator">=</span> <span class="token boolean">true</span>
animationView2<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> animationView3 <span class="token operator">=</span> <span class="token function">LOTAnimationView</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string">&quot;toggle&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">self</span><span class="token punctuation">.</span>view<span class="token punctuation">.</span><span class="token function">addSubview</span><span class="token punctuation">(</span>animationView3<span class="token punctuation">)</span>
animationView3<span class="token punctuation">.</span>frame<span class="token punctuation">.</span>origin<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">40</span>
animationView3<span class="token punctuation">.</span>frame<span class="token punctuation">.</span>origin<span class="token punctuation">.</span>y <span class="token operator">=</span> animationView2<span class="token punctuation">.</span>frame<span class="token punctuation">.</span>maxY <span class="token operator">+</span> <span class="token number">4</span>
animationView3<span class="token punctuation">.</span>autoReverseAnimation <span class="token operator">=</span> <span class="token boolean">true</span>
animationView3<span class="token punctuation">.</span>loopAnimation <span class="token operator">=</span> <span class="token boolean">true</span>
animationView3<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> animationView4 <span class="token operator">=</span> <span class="token function">LOTAnimationView</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string">&quot;toggle&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">self</span><span class="token punctuation">.</span>view<span class="token punctuation">.</span><span class="token function">addSubview</span><span class="token punctuation">(</span>animationView4<span class="token punctuation">)</span>
animationView4<span class="token punctuation">.</span>frame<span class="token punctuation">.</span>origin<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">40</span>
animationView4<span class="token punctuation">.</span>frame<span class="token punctuation">.</span>origin<span class="token punctuation">.</span>y <span class="token operator">=</span> animationView3<span class="token punctuation">.</span>frame<span class="token punctuation">.</span>maxY <span class="token operator">+</span> <span class="token number">4</span>
animationView4<span class="token punctuation">.</span>autoReverseAnimation <span class="token operator">=</span> <span class="token boolean">true</span>
animationView4<span class="token punctuation">.</span>loopAnimation <span class="token operator">=</span> <span class="token boolean">true</span>
animationView4<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<h2 id="now-lets-change-their-colors"><a name="now-lets-change-their-colors" class="plugin-anchor" href="#now-lets-change-their-colors"><i class="fa fa-link" aria-hidden="true"></i></a>Now lets change their colors</h2>
<p><img src="../images/switch_BgColors.gif" alt="Recolored Toggle"></p>
<pre class="language-"><code class="lang-swift language-"><span class="token comment" spellcheck="true">// Create a LOTKeypath</span>
<span class="token keyword">let</span> keypath <span class="token operator">=</span> <span class="token function">LOTKeypath</span><span class="token punctuation">(</span>string<span class="token punctuation">:</span> <span class="token string">&quot;BG-On.Group 1.Fill 1.Color&quot;</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">// Create some Color Values</span>
<span class="token keyword">let</span> greenColorValue <span class="token operator">=</span> <span class="token function">LOTColorValueCallback</span><span class="token punctuation">(</span>color<span class="token punctuation">:</span><span class="token builtin">UIColor</span><span class="token punctuation">.</span>green<span class="token punctuation">.</span><span class="token builtin">CGColor</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> redColorValue <span class="token operator">=</span> <span class="token function">LOTColorValueCallback</span><span class="token punctuation">(</span>color<span class="token punctuation">:</span><span class="token builtin">UIColor</span><span class="token punctuation">.</span>red<span class="token punctuation">.</span><span class="token builtin">CGColor</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> orangeColorValue <span class="token operator">=</span> <span class="token function">LOTColorValueCallback</span><span class="token punctuation">(</span>color<span class="token punctuation">:</span><span class="token builtin">UIColor</span><span class="token punctuation">.</span>orange<span class="token punctuation">.</span><span class="token builtin">CGColor</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">// Now set them on the animations.</span>
animationView2<span class="token punctuation">.</span><span class="token function">setValueDelegate</span><span class="token punctuation">(</span>greenColorValue <span class="token keyword">for</span><span class="token punctuation">:</span>keypath<span class="token punctuation">)</span>
animationView3<span class="token punctuation">.</span><span class="token function">setValueDelegate</span><span class="token punctuation">(</span>redColorValue <span class="token keyword">for</span><span class="token punctuation">:</span>keypath<span class="token punctuation">)</span>
animationView4<span class="token punctuation">.</span><span class="token function">setValueDelegate</span><span class="token punctuation">(</span>orangeColorValue <span class="token keyword">for</span><span class="token punctuation">:</span>keypath<span class="token punctuation">)</span>
</code></pre>
<p>The keyPath is a dot seperated path of layer and property names from After Effects.
<img src="../images/aftereffectskeypath.png" alt="Key Path">
&quot;BG-On.Group 1.Fill 1.Color&quot;</p>
<h2 id="now-lets-change-a-couple-of-properties"><a name="now-lets-change-a-couple-of-properties" class="plugin-anchor" href="#now-lets-change-a-couple-of-properties"><i class="fa fa-link" aria-hidden="true"></i></a>Now lets change a couple of properties</h2>
<p><img src="../images/switch_MultipleBgs.gif" alt="Multiple Colors"></p>
<pre class="language-"><code class="lang-swift language-"><span class="token keyword">let</span> onKeypath <span class="token operator">=</span> <span class="token function">LOTKeypath</span><span class="token punctuation">(</span>string<span class="token punctuation">:</span> <span class="token string">&quot;BG-On.Group 1.Fill 1.Color&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> offKeypath <span class="token operator">=</span> <span class="token function">LOTKeypath</span><span class="token punctuation">(</span>string<span class="token punctuation">:</span> <span class="token string">&quot;BG-Off.Group 1.Fill 1.Color&quot;</span><span class="token punctuation">)</span>
animationView2<span class="token punctuation">.</span><span class="token function">setValueDelegate</span><span class="token punctuation">(</span>greenColorValue <span class="token keyword">for</span><span class="token punctuation">:</span>onKeypath<span class="token punctuation">)</span>
animationView2<span class="token punctuation">.</span><span class="token function">setValueDelegate</span><span class="token punctuation">(</span>redColorValue <span class="token keyword">for</span><span class="token punctuation">:</span>offKeypath<span class="token punctuation">)</span>
</code></pre>

                                
                                </section>
                            
                        </div>
                    </div>
                
            </div>

            
                
                <a href="view-controllers.html" class="navigation navigation-prev " aria-label="Previous page: View Controller Transitions">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="addsubviews.html" class="navigation navigation-next " aria-label="Next page: Adding Views to Animation at Runtime">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Dynamic Properties","level":"1.3.1.8","depth":3,"next":{"title":"Adding Views to Animation at Runtime","level":"1.3.1.9","depth":3,"path":"ios/addsubviews.md","ref":"ios/addsubviews.md","articles":[]},"previous":{"title":"View Controller Transitions","level":"1.3.1.7","depth":3,"path":"ios/view-controllers.md","ref":"ios/view-controllers.md","articles":[]},"dir":"ltr"},"config":{"plugins":["edit-link","prism@2.0.0","-highlight","github","-search","codeblock-disable-glossary","collapsible-chapters","anchors"],"root":"./docs","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"prism":{},"github":{"url":"https://github.com/airbnb/lottie/"},"collapsible-chapters":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"codeblock-disable-glossary":{},"fontsettings":{"theme":"white","family":"sans","size":2},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"edit-link":{"label":"Edit This Page","base":"https://github.com/airbnb/lottie"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchors":{}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{"androidVersion":"2.2.5","iosVersion":"2.1.3","reactNativeVersion":"2.2.7"},"title":"Lottie","gitbook":"3.2.2","description":"After Effects Animations for Android, iOS, React Native, and Web"},"file":{"path":"ios/dynamic.md","mtime":"2018-01-08T23:39:18.416Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2018-01-08T23:53:38.895Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-codeblock-disable-glossary/disable-glossary.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-collapsible-chapters/collapsible-chapters.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

